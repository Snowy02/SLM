# This is the only function you need to change.

def sanitize_mermaid_name(name):
    # CORRECTED PATTERN: The ranges are now correct (a-z, A-Z, 0-9)
    # and in the right order.
    return re.sub(r'[^a-zA-Z0-9_]', '_', name)
